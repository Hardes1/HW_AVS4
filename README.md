# Устинов Георгий, БПИ218, ИДЗ№4, Вариант №3.

Условие задачи
>**Задача о Винни-Пухе - 2 или неправильные пчелы.** N пчел живет в улье,
 каждая пчела может собирать мед и сторожить улей (N > 3). Пчела не поки-
нет улей, если кроме нее в нем нет других пчел. Каждая пчела приносит за
раз одну порцию меда. Всего в улей может войти тридцать порций меда.
Вини-Пух спит пока меда в улье меньше половины, но как только его стано-
вится достаточно, он просыпается и пытается достать весь мед из улья. Если
в улье находится менее чем три пчелы, Вини-Пух забирает мед, убегает, съе-3
дает мед и снова засыпает. Если в улье пчел больше, они кусают Вини-Пуха,
он убегает, лечит укус, и снова бежит за медом. Создать многопоточное
приложение, моделирующее поведение пчел и медведя. Осуществить ба-
лансировку, обеспечивающую циклическое освобождение улья от меда.

### Как запускать

#### Через CMake

Конфигурация в первый раз (находясь в корневой папке проекта)

> mkdir build
> 
> cd build
> 
> cmake ../
> 
> cd ../

Билд (находясь в корневой папке проекта)

> cmake --build ./build

#### Через g++
Конфигурация в первый раз (находясь в корневой папке проекта)
> mkdir build

Билд (находясь в корневой папке проекта)

> g++ ./main.cpp -lpthread -o ./build/main.out

#### Запуск для обоих вариантов (находясь в корневой папке проекта)

> ./build/main.out [-c <number_of_honey>]

Параметры в скобках опциональные, но при использовании идут строго в таком порядке.

### Про циклическое освобождения

Из условия видно, что пчёл должно быть достаточно мало, чтобы Винни-пух мог взять мёд.
Такой результат достигался засчёт того, что после принесения мёда пчёлы улетали надолго (большое случайное время сна потока),
а доставляли мёд пчёлы быстро (малое случайное время сна потока).

## Изменения на 4-5 баллов

### Модель параллельных вычислений
Для решения этой задачи я использовал модель параллельных вычислений, которая называется
"**Произовдители и потребители**". 

### Формат входных данных
Пользователю предлагается ввести число **3<=N<=30**, его можно ввести через файл или же через консоль.

### Описание синхропримитивов
Данное приложение реализовано с помощью следующих синхропримитивов: мьютекс и условная переменная.

### Описание предметной области
У нас имеется 1<=N<=30 пчёл, которые собирают и охраняют мёд. Помимо них есть медведь по имени Винни-Пух,
который пытается украсть у них этот мёд. Ресурсы ограничены, поэтому пчёлы могут сохранить не более 30 единиц
мёда в медовых зобиках и, кроме этого, пчела может принести за раз 1 единицу мёда. Винни - ленивый и трусливый медведь,
поэтому он забирает мёд только в том случае, когда его скопилось хотя бы 15 единиц, а также в улее в текущий момент находится
не более 2х пчёл. Пчёлы бдительны, поэтому в улее всегда есть хотя бы 1 пчела. Задача просимулировать это.

## Изменения на 6 баллов

### Реализуемый алгоритм

Изначально создаются потоки медведя и N пчёл, которые начинают свою работу в функция take_honey и fill_honey соответственно.
Каждая из этих функций представляет из себя бесконечный цикл с одними и теми же повторяющимися действиями.

#### Алгоритм для пчёл
Прилететь в улей, тем самым увелича кол-во пчёл там, если количество мёда не максимально (<30) добавить мёд,
иначе не добавлять мёд. Затем, если пчела осталась одна ждать, пока не прилетят другие пчёлы. Все действия сопровождаются
перерывами

#### Алгоритм для медведя 
Если количество мёда хотя бы половина, то проснуться, иначе продолжить спать.
Иначе если количество пчёл больше 2, отступить и уйти лечиться
Иначе забрать весь мёд себе. Все действия медведя выполняются с паузами
